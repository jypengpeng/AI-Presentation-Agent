# AI Presentation Agent

**è®© AI å¸®ä½ åš PPTï¼Œä¸“æ³¨äºä½ çš„åˆ›æ„å’Œå†…å®¹ã€‚**

ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½æ¼”ç¤ºæ–‡ç¨¿ç”Ÿæˆå™¨ï¼Œåªéœ€ä¸Šä¼ å‚è€ƒèµ„æ–™æˆ–è¾“å…¥ä¸»é¢˜ï¼ŒAI å°±èƒ½è‡ªåŠ¨åˆ†æå†…å®¹ã€è§„åˆ’å¤§çº²ã€è®¾è®¡ä¸“ä¸šçº§å¹»ç¯ç‰‡ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/Python-3.11+-green.svg)
![React](https://img.shields.io/badge/React-18.2-blue.svg)
![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ¤– AI é©±åŠ¨çš„æ™ºèƒ½ç”Ÿæˆ
- **è‡ªåŠ¨å†…å®¹åˆ†æ**ï¼šä¸Šä¼ æ–‡æ¡£/ä»£ç /æ•°æ®ï¼ŒAI è‡ªåŠ¨æå–å…³é”®ä¿¡æ¯
- **æ™ºèƒ½å¤§çº²è§„åˆ’**ï¼šåŸºäº Architect æç¤ºè¯ï¼Œç”Ÿæˆç»“æ„åŒ–çš„æ¼”ç¤ºå¤§çº²
- **ä¸“ä¸šå¹»ç¯ç‰‡è®¾è®¡**ï¼šDesigner Agent ç”Ÿæˆ Apple Keynote é£æ ¼çš„ä¸“ä¸šå¹»ç¯ç‰‡
- **AI ä¿®æ”¹åŠ©æ‰‹**ï¼šæ¯é¡µå¹»ç¯ç‰‡é…å¤‡ç‹¬ç«‹çš„ AI åŠ©æ‰‹ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€ä¿®æ”¹

### ğŸ¨ ä¸“ä¸šçº§è¾“å‡º
- **Tailwind CSS + Chart.js**ï¼šç°ä»£åŒ–çš„è§†è§‰è®¾è®¡
- **å“åº”å¼å¸ƒå±€**ï¼šæ”¯æŒå„ç§å±å¹•å°ºå¯¸
- **ä¸°å¯Œçš„å¯è§†åŒ–**ï¼šå›¾è¡¨ã€å¡ç‰‡ã€å¼•ç”¨æ¡†ç­‰å¤šç§ç»„ä»¶
- **å¤šæ ¼å¼å¯¼å‡º**ï¼šHTMLã€PPTXã€ZIP æ‰“åŒ…

### âš¡ é«˜æ•ˆå¹¶å‘
- **å¹¶å‘ç”Ÿæˆ**ï¼šæ”¯æŒåŒæ—¶ç”Ÿæˆå¤šå¼ å¹»ç¯ç‰‡ï¼ˆé»˜è®¤ 3 å¹¶å‘ï¼‰
- **å®æ—¶è¿›åº¦**ï¼šWebSocket æ¨é€ç”ŸæˆçŠ¶æ€
- **æ–­ç‚¹ç»­ä¼ **ï¼šå¤±è´¥åå¯é‡æ–°ç”Ÿæˆå•å¼ å¹»ç¯ç‰‡

### ğŸ”§ çµæ´»é…ç½®
- **æ¨¡å—åŒ–æ¶æ„**ï¼šå„ç»„ä»¶ç‹¬ç«‹å¯æ›¿æ¢
- **å¤š API æ”¯æŒ**ï¼šå…¼å®¹ OpenAIã€Azureã€å„ç§ç¬¬ä¸‰æ–¹ API
- **å¯è‡ªå®šä¹‰æç¤ºè¯**ï¼šArchitectã€Designerã€SlideModifier å‡å¯å®šåˆ¶

---

## ğŸ–¥ï¸ ç•Œé¢é¢„è§ˆ

### å·¥ä½œæµç¨‹

```
1. åˆ›å»ºä»»åŠ¡      2. ä¸Šä¼ èµ„æ–™       3. AI åˆ†æè§„åˆ’     4. ç¼–è¾‘å¤§çº²
   [æ–°å»ºä»»åŠ¡] â†’    [æ‹–æ‹½ä¸Šä¼ ] â†’     [è‡ªåŠ¨ç”Ÿæˆ] â†’     [è°ƒæ•´é¡ºåº]
       â†“
5. ç”Ÿæˆå¹»ç¯ç‰‡    6. å•é¡µç¼–è¾‘       7. AI ä¿®æ”¹åŠ©æ‰‹     8. å¯¼å‡ºä¸‹è½½
   [å¹¶å‘ç”Ÿæˆ] â†’    [å®æ—¶é¢„è§ˆ] â†’    [è‡ªç„¶è¯­è¨€ä¿®æ”¹] â†’    [å¤šæ ¼å¼]
```

### é¡µé¢è¯´æ˜

| é¡µé¢ | åŠŸèƒ½ |
|------|------|
| ä»»åŠ¡åˆ—è¡¨ | ç®¡ç†æ‰€æœ‰æ¼”ç¤ºæ–‡ç¨¿é¡¹ç›® |
| ç”Ÿæˆé¡µé¢ | è¾“å…¥ä¸»é¢˜ã€ä¸Šä¼ èµ„æ–™ã€è§¦å‘ AI åˆ†æ |
| å¤§çº²ç¼–è¾‘ | è°ƒæ•´å¹»ç¯ç‰‡é¡ºåºã€ä¿®æ”¹æ ‡é¢˜å†…å®¹ |
| ç½‘æ ¼æ€»è§ˆ | æŸ¥çœ‹æ‰€æœ‰å¹»ç¯ç‰‡ç¼©ç•¥å›¾ã€å¯åŠ¨ç”Ÿæˆ |
| å•é¡µç¼–è¾‘ | é¢„è§ˆå¹»ç¯ç‰‡ã€ä½¿ç”¨ AI åŠ©æ‰‹ä¿®æ”¹ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Docker ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

**Windowsï¼š**
```bash
cd refactor_version
start.bat
```

**Linux/Macï¼š**
```bash
cd refactor_version
chmod +x start.sh
./start.sh
```

### æ‰‹åŠ¨å¯åŠ¨

1. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ OPENAI_API_KEY
   ```

2. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

3. **è®¿é—®åº”ç”¨**
   - å‰ç«¯ç•Œé¢: http://localhost:3000
   - åç«¯ API: http://localhost:8000
   - API æ–‡æ¡£: http://localhost:8000/docs

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# é‡æ–°æ„å»ºï¼ˆæ›´æ–°ä»£ç åï¼‰
docker-compose build --no-cache
```

---

## ğŸ’» æœ¬åœ°å¼€å‘

### åç«¯å¼€å‘

```bash
cd backend
pip install -r requirements.txt
python run.py
```

### å‰ç«¯å¼€å‘

```bash
cd frontend
npm install
npm run dev
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
refactor_version/
â”œâ”€â”€ docker-compose.yml        # Docker ç¼–æ’é…ç½®
â”œâ”€â”€ start.sh / start.bat      # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ backend/                  # Python åç«¯ (FastAPI)
â”‚   â”œâ”€â”€ main.py              # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ run.py               # å¼€å‘æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”‚   â”‚
â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ settings.py      # ç¯å¢ƒå˜é‡å’Œé…ç½®
â”‚   â”‚   â””â”€â”€ prompts.py       # æç¤ºè¯åŠ è½½å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                # Agent æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ agent.py         # Agent åŸºç±»ï¼ˆæ¶ˆæ¯å¤„ç†ã€å·¥å…·è°ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ message.py       # æ¶ˆæ¯æ ¼å¼åŒ–
â”‚   â”‚   â””â”€â”€ tool_executor.py # å·¥å…·æ‰§è¡Œå¼•æ“
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/               # å·¥å…·æ¨¡å—ï¼ˆå¯æ‰©å±•ï¼‰
â”‚   â”‚   â”œâ”€â”€ base.py          # å·¥å…·åŸºç±»å’Œæ³¨å†Œè¡¨
â”‚   â”‚   â”œâ”€â”€ file_tools.py    # æ–‡ä»¶æ“ä½œï¼ˆread/write/listï¼‰
â”‚   â”‚   â”œâ”€â”€ command_tools.py # å‘½ä»¤æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ image_tools.py   # å›¾åƒç”Ÿæˆï¼ˆDALL-Eï¼‰
â”‚   â”‚   â””â”€â”€ phase_tools.py   # é˜¶æ®µæ§åˆ¶
â”‚   â”‚
â”‚   â”œâ”€â”€ workflow/            # å·¥ä½œæµç®¡ç†
â”‚   â”‚   â”œâ”€â”€ phase_manager.py # é˜¶æ®µçŠ¶æ€æœº
â”‚   â”‚   â””â”€â”€ slide_generator.py # å¹¶å‘å¹»ç¯ç‰‡ç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ export/              # å¯¼å‡ºåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ html_exporter.py # åˆå¹¶ HTML å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ pptx_exporter.py # PowerPoint å¯¼å‡º
â”‚   â”‚   â””â”€â”€ zip_exporter.py  # èµ„æºæ‰“åŒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ state/               # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ task_manager.py  # ä»»åŠ¡ CRUD
â”‚   â”‚   â””â”€â”€ manifest.py      # å¹»ç¯ç‰‡æ¸…å•ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                 # REST API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ tasks.py         # /tasks/* ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ slides.py        # /slides/* å¹»ç¯ç‰‡æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ agent.py         # /agent/* AI ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ upload.py        # /upload/* æ–‡ä»¶ä¸Šä¼ 
â”‚   â”‚   â””â”€â”€ websocket.py     # WebSocket å®æ—¶é€šä¿¡
â”‚   â”‚
â”‚   â””â”€â”€ prompts/             # AI æç¤ºè¯
â”‚       â”œâ”€â”€ system_prompt.txt    # æ”¶é›†é˜¶æ®µç³»ç»Ÿæç¤º
â”‚       â”œâ”€â”€ Architect_prompt.md  # å¤§çº²è§„åˆ’æç¤ºè¯
â”‚       â”œâ”€â”€ Designer.md          # å¹»ç¯ç‰‡è®¾è®¡æç¤ºè¯
â”‚       â””â”€â”€ SlideModifier.md     # AI ä¿®æ”¹åŠ©æ‰‹æç¤ºè¯
â”‚
â”œâ”€â”€ frontend/                # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskListPage.tsx     # ä»»åŠ¡åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerationPage.tsx   # ç”Ÿæˆ/ç½‘æ ¼æ€»è§ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ PlanEditorPage.tsx   # å¤§çº²ç¼–è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ SlideEditorPage.tsx  # å•é¡µç¼–è¾‘
â”‚   â”‚   â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/        # API æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ api.ts       # REST API å°è£…
â”‚   â”‚   â””â”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ data/                    # è¿è¡Œæ—¶æ•°æ®ç›®å½•
    â””â”€â”€ tasks/               # ä»»åŠ¡å·¥ä½œç©ºé—´
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å·¥ä½œæµé˜¶æ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Collecting â”‚ â†’  â”‚ Editing Plan â”‚ â†’  â”‚ Designing â”‚ â†’  â”‚ Completed â”‚
â”‚  æ”¶é›†èµ„æ–™   â”‚    â”‚   ç¼–è¾‘å¤§çº²   â”‚    â”‚  ç”Ÿæˆè®¾è®¡  â”‚    â”‚  å¯¼å‡ºä¸‹è½½  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘                   â†‘                  â†‘
   ä¸Šä¼ æ–‡ä»¶            AI è§„åˆ’           å¹¶å‘ç”Ÿæˆ
   è¾“å…¥ä¸»é¢˜          ç”¨æˆ·ä¿®æ”¹          AI ä¿®æ”¹åŠ©æ‰‹
```

### å¤š Agent åä½œ

| Agent | èŒè´£ | æç¤ºè¯ |
|-------|------|--------|
| Collector | åˆ†æä¸Šä¼ çš„æ–‡ä»¶ï¼Œæå–å…³é”®ä¿¡æ¯ | system_prompt.txt |
| Architect | è§„åˆ’æ¼”ç¤ºå¤§çº²ï¼Œè®¾è®¡å¹»ç¯ç‰‡ç»“æ„ | Architect_prompt.md |
| Designer | ç”Ÿæˆä¸“ä¸šçš„ HTML å¹»ç¯ç‰‡ | Designer.md |
| Modifier | æ ¹æ®ç”¨æˆ·æŒ‡ä»¤ä¿®æ”¹å¹»ç¯ç‰‡ | SlideModifier.md |

### å¹¶å‘ç”Ÿæˆæœºåˆ¶

```python
# é€šè¿‡ asyncio.Semaphore æ§åˆ¶å¹¶å‘æ•°
self._semaphore = asyncio.Semaphore(max_concurrent)

async def _generate_slide(self, task):
    async with self._semaphore:  # é™åˆ¶å¹¶å‘æ•°
        await self._call_designer(task)
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥ | (å¿…å¡«) |
| `OPENAI_API_BASE` | API ç«¯ç‚¹åœ°å€ | https://api.openai.com/v1 |
| `OPENAI_MODEL` | é»˜è®¤æ¨¡å‹ | gpt-4o |
| `ARCHITECT_MODEL` | Architect ä½¿ç”¨çš„æ¨¡å‹ | gpt-4o |
| `DESIGNER_MODEL` | Designer ä½¿ç”¨çš„æ¨¡å‹ | gpt-4o |
| `IMAGE_API_KEY` | å›¾åƒç”Ÿæˆ API å¯†é’¥ | åŒ OPENAI_API_KEY |
| `IMAGE_MODEL` | å›¾åƒç”Ÿæˆæ¨¡å‹ | dall-e-3 |
| `MAX_CONCURRENT_SLIDES` | å¹¶å‘ç”Ÿæˆå¹»ç¯ç‰‡æ•° | 3 |
| `SLIDE_GENERATION_TIMEOUT` | å•é¡µç”Ÿæˆè¶…æ—¶(ç§’) | 120 |

### ä½¿ç”¨ç¬¬ä¸‰æ–¹ API

```env
# ä½¿ç”¨å…¼å®¹ OpenAI çš„ç¬¬ä¸‰æ–¹ API
OPENAI_API_BASE=https://your-api-endpoint.com/v1
OPENAI_API_KEY=your-api-key

# ä½¿ç”¨ä¸åŒæ¨¡å‹
OPENAI_MODEL=claude-3-5-sonnet
DESIGNER_MODEL=gpt-4o-mini
```

---

## ğŸ”Œ API æ¥å£

### æ ¸å¿ƒç«¯ç‚¹

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| GET | `/tasks` | è·å–ä»»åŠ¡åˆ—è¡¨ |
| POST | `/tasks` | åˆ›å»ºæ–°ä»»åŠ¡ |
| POST | `/tasks/{id}/agent/run` | å¯åŠ¨ AI ç”Ÿæˆ |
| GET | `/tasks/{id}/slides/plan` | è·å–å¹»ç¯ç‰‡å¤§çº² |
| PUT | `/tasks/{id}/slides/plan` | æ›´æ–°å¹»ç¯ç‰‡å¤§çº² |
| POST | `/tasks/{id}/slides/generate` | å¯åŠ¨å¹»ç¯ç‰‡ç”Ÿæˆ |
| GET | `/tasks/{id}/slides/generate/progress` | è·å–ç”Ÿæˆè¿›åº¦ |
| POST | `/tasks/{id}/slides/{index}/ai-modify` | AI ä¿®æ”¹å¹»ç¯ç‰‡ |
| GET | `/tasks/{id}/slides/export/{format}` | å¯¼å‡º(html/pptx/zip) |

### WebSocket

```javascript
// è¿æ¥ WebSocket è·å–å®æ—¶æ›´æ–°
const ws = new WebSocket(`ws://localhost:8000/tasks/${taskId}/agent/stream`)

ws.onmessage = (event) => {
  const data = JSON.parse(event.data)
  // data.type: 'chunk' | 'tool_call' | 'phase' | 'complete' | 'error'
}
```

---

## ğŸ“ è‡ªå®šä¹‰æç¤ºè¯

### ä¿®æ”¹ Architect æç¤ºè¯

ç¼–è¾‘ `backend/prompts/Architect_prompt.md`ï¼š

```markdown
# ä½ æ˜¯ä¸€ä¸ªæ¼”ç¤ºæ–‡ç¨¿è§„åˆ’ä¸“å®¶

## ä½ çš„ä»»åŠ¡
æ ¹æ®ç”¨æˆ·æä¾›çš„ä¿¡æ¯ï¼Œåˆ›å»ºä¸€ä¸ªç»“æ„æ¸…æ™°çš„æ¼”ç¤ºå¤§çº²ã€‚

## è¾“å‡ºæ ¼å¼
ä½¿ç”¨ write_file å·¥å…·å°†è§„åˆ’å†™å…¥ slides/presentation_plan.json
...
```

### ä¿®æ”¹ Designer æç¤ºè¯

ç¼–è¾‘ `backend/prompts/Designer.md`ï¼š

```markdown
# Role: Slide Visual Designer

You are an expert presentation designer...

## Design Principles
1. No Scrolling, Full-Screen Design
2. Large Typography, High Contrast
...
```

---

## ğŸ”§ é‡æ„è¯´æ˜

### ä»åŸç‰ˆçš„æ”¹è¿›

| æ–¹é¢ | åŸç‰ˆ | é‡æ„ç‰ˆ |
|------|------|--------|
| æ¶æ„ | å•ä½“è„šæœ¬ | æ¨¡å—åŒ–åˆ†å±‚ |
| å·¥å…·ç³»ç»Ÿ | ç¡¬ç¼–ç  | å¯æ‰©å±•æ³¨å†Œè¡¨ |
| é…ç½®ç®¡ç† | æ•£è½å„å¤„ | é›†ä¸­ Settings |
| çŠ¶æ€ç®¡ç† | æ–‡ä»¶ä¾èµ– | TaskManager |
| å¹¶å‘æ§åˆ¶ | é¡ºåºæ‰§è¡Œ | Semaphore å¹¶å‘ |
| å‰ç«¯ | ç®€å•é¡µé¢ | å®Œæ•´ React SPA |
| éƒ¨ç½² | æ‰‹åŠ¨é…ç½® | Docker ä¸€é”®å¯åŠ¨ |

### æ¨¡å—èŒè´£

- **config/**: é…ç½®å•ä¸€å…¥å£ï¼Œç¯å¢ƒå˜é‡ â†’ Pydantic Settings
- **core/**: Agent æ ¸å¿ƒé€»è¾‘ï¼Œæ¶ˆæ¯å¤„ç†ã€å·¥å…·æ‰§è¡Œ
- **tools/**: å·¥å…·æ¨¡å—åŒ–ï¼ŒBaseTool æ¥å£ + ToolRegistry æ³¨å†Œ
- **workflow/**: é˜¶æ®µçŠ¶æ€æœºï¼ŒPhase æšä¸¾ + çŠ¶æ€è½¬æ¢
- **state/**: ä»»åŠ¡æŒä¹…åŒ–ï¼ŒCRUD + çŠ¶æ€è¿½è¸ª
- **api/**: RESTful è·¯ç”±ï¼Œä¾èµ–æ³¨å…¥

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼